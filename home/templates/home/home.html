{% extends "base.html" %}

{% block title %}My Fake Instagram{% endblock %}

{% block sidebar %}
        
    <a href="/">Home</a> -
    {% if user.is_authenticated %}
            <a href="{% url 'accounts:logout' %}">Logout</a> -
            hello! {{ user.username }}
        {% else %}
            <a href="{% url 'accounts:login' %}">Login</a>
    {% endif %}
    
        
{% endblock %}

{% load comment_extras %}
{% load count_likes %}

{% block content %}

{% for entry in blog_entries %}
    <h2>{{ entry.title }}</h2>
    <p>{{ entry.body }}</p>
{% endfor %}

    <a href="{% url 'home:post' %}">Post now!</a>
    <ul>
        {% for post in posts %}
            <li>
                <h1>{{ post.user }}</h1>
                <h1>{{ post.pub_date }}</h1>
                <p>{{ post.post_text }}</p>
                <img src="{{ post.pics.photo.url }}">
                <br>
                <a href="/{{ post.id }}/">comment</a>
                <br>
                <label>Likes {% get_likes_number post_type_id post.id %}</label>
               
                <label>Dislikes {% get_dislikes_number 8 post.id %}</label>
                <br>
                <a href="/{{ post.id }}/like">like</a>
                <a href="/{{ post.id }}/dislike">dislike</a>

                {% for comment in post.comments.all %}
                    <h2>{{ comment.pub_date }} {% get_username_from_userid comment.user_id %} says: </h2>
                    <p>{{ comment.comment_text }}</p>
                    <br>

                {% endfor%}
            </li>
        {% endfor %}
    </ul>
    {% for post in posts %}

    {% endfor %}
{% endblock %}